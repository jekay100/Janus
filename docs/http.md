HTTP, HTTPS, HTTP2
==========

## HTTP
HTTP-Hypertext transfer protocol

超文本传输协议是一种详细规定了浏览器和万维网服务器之间互相通信的规则，
通过因特网传送万维网文档的数据传送协议
。

* 连接(Connection)：一个传输层的实际环流，它是建立在两个相互通讯的应用程序之间。 
* 消息(Message)：HTTP通讯的基本单位，包括一个结构化的八元组序列并通过连接传输。
* 请求(Request)：一个从客户端到服务器的请求信息包括应用于资源的方法、资源的标识符和协议的版本号
* 响应(Response)：一个从服务器返回的信息包括HTTP协议的版本号、请求的状态(例如“成功”或“没找到”)和文档的MIME类型。
* 资源(Resource)：由URI标识的网络数据对象或服务。
* 实体(Entity)：数据资源或来自服务资源的回映的一种特殊表示方法，它可能被包围在一个请求或响应信息中。一个实体包括实体头信息和实体的本身内容。
* 客户机(Client)：一个为发送请求目的而建立连接的应用程序。
* 用户代理(User agent)：初始化一个请求的客户机。它们是浏览器、编辑器或其它用户工具。
* 服务器(Server)：一个接受连接并对请求返回信息的应用程序。
* 源服务器(Origin server)：是一个给定资源可以在其上驻留或被创建的服务器。
* 代理(Proxy)：一个中间程序，它可以充当一个服务器，也可以充当一个客户机，为其它客户机建立请求。请求是通过可能的翻译在内部或经过传递到其它的服务器中。一个代理在发送请求信息之前，必须解释并且如果可能重写它。
代理经常作为通过防火墙的客户机端的门户，代理还可以作为一个帮助应用来通过协议处理没有被用户代理完成的请求。
* 网关(Gateway)：一个作为其它服务器中间媒介的服务器。与代理不同的是，网关接受请求就好象对被请求的资源来说它就是源服务器；发出请求的客户机并没有意识到它在同网关打交道。
网关经常作为通过防火墙的服务器端的门户，网关还可以作为一个协议翻译器以便存取那些存储在非HTTP系统中的资源。
* 通道(Tunnel)：是作为两个连接中继的中介程序。一旦激活，通道便被认为不属于HTTP通讯，尽管通道可能是被一个HTTP请求初始化的。当被中继的连接两端关闭时，通道便消失。当一个门户(Portal)必须存在或中介(Intermediary)不能解释中继的通讯时通道被经常使用。
* 缓存(Cache)：反应信息的局域存储。

## HTTPS
Hypertext Transfer Protocol Secure

是超文本传输协议和SSL/TLS的组合，用以提供加密通讯及对网络服务器身份的鉴定

### TLS与SSL协议

Transport Layer Socket和Secure Socket Layer本质上是一样的，是集加密和身份认证于一身的安全协议,为浏览器,IIS,Apache,Exchange Server等所有应用默认支持.
TLS是在SSL（由最早的浏览器厂商Netscape公司推出）基础上，发展成国际标准组织IETF的标准RFC5246。
TLS协议允许客户机/服务器应用程序通过网络进行通信的目的是防止窃听、干扰和伪造的信息。
TLS使用加密和数字签名技术提供在互联网上端点认证和通信的保密性。加密强度可以达到1024或2048位。
在典型的end-user/browser使用，TLS身份验证是单方面的：只有服务器进行身份验证 （客户端知道服务器的身份），而不是相反 （客户端仍然未经验证或匿名）。严格地说， 服务器认证对于浏览器（工具）和最终用户（个人）意义并不完全相同。对于浏览器，它只是意味着浏览器验证服务器的证书，即检查了服务器证书的颁发机构是受信的，有完整的信任链。一旦通过验证，浏览器就显示安全图标（如状态栏上的“小锁”）。但是，仅仅是验证不“确定”服务器到最终用户。

* Peer negotiation for algorithm supporthttp://en.wikipedia.org/wiki/Transport_Layer_Security对等协商
* Key exchange and authentication 密钥交换和认证
* Symmetric cipher encryption and message authentication 对称密码加密和消息认证

## HTTP 特点

* 支持客户/服务器模式。

> 支持基本认证和安全认证

* 简单快速

> 客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有GET、HEAD、POST。
> 每种方法规定了客户与服务器联系的类型不同。
> 由于HTTP协议简单，使得HTTP服务器的程序规模小，因而通信速度很快。

* 灵活

> HTTP允许传输任意类型的数据对象。
> 正在传输的类型由Content-Type加以标记。

* HTTP 0.9和1.0使用非持续连接

> 限制每次连接只处理一个请求，服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。

* HTTP 1.1使用持续连接

> 不必为每个web对象创建一个新的连接，一个连接可以传送多个对象。

* 无状态：HTTP协议是无状态协议。

> 无状态是指协议对于事务处理没有记忆能力。
> 缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。
> 另一方面，在服务器不需要先前信息时它的应答就较快。

## HTTPS 特点

* HTTPS的主要思想是在不安全的网络上创建一安全信道，并可在使用适当的加密套件和服务器证书可被验证且可被信任时，对窃听和中间人攻击提供合理的保护

* 用户相信他们的浏览器正确实现了HTTPS且安装了正确的证书颁发机构；
* 用户相信证书颁发机构仅信任合法的网站；
* 被访问的网站提供了一个有效的证书，意即，它是由一个被信任的证书颁发机构签发的（大部分浏览器会对无效的证书发出警告）；
* 该证书正确地验证了被访问的网站（如，访问https://example时收到了给“Example Inc.”而不是其它组织的证书）；
* 或者互联网上相关的节点是值得信任的，或者用户相信本协议的加密层（TLS或SSL）不能被窃听者破坏。

## HTTP 与 HTTPS 的区别

> HTTP 使用的是80 Port 的协议(纯文字模式)
> HTTPS　走的是443 Port 的协议(可通行二进制字符模式)

> https协议需要到ca申请证书，一般免费证书很少，需要交费

> http是超文本传输协议，信息是明文传输，https 则是具有安全性的ssl加密传输协议

> https少许对客户端有要求的情况下，会要求客户端也必须有一个证书

### https get 的隐患

虽然说使用 https get 方法， 黑客在监听信道的时候只能拿到密文
但是GET方法的URL会出现在浏览器的address bar和history里面，
所以依然是一个安全隐患

AJAX下的https GET请求的URL不会被记录在browser的history里面，
但是依然会被记录在Firefox的memory cache里面（其他浏览器也有类似的）

So, 在一些安全性要求比较高的场合，还是尽量避免使用GET方法吧！ 

## http2.0

在开放互联网上HTTP 2.0将只用于https://网址，而 http://网址将继续使用HTTP/1，目的是在开放互联网上增加使用加密技术，以提供强有力的保护去遏制主动攻击。

HTTP 2.0 发布了首个草案，该草案直接复制于 SPDY，并以此为基准做完善和改进，而对该草案的测试实现将于明年年初提供。

HTTP 2.0 是由 IETF 的 Hypertext Transfer Protocol Bis (httpbis) 工作组开发。

### HTTP 2.0 包含：

* 异步连接多路复用
* Header 压缩
* Request-response 流水线.

另外该版本一个关键的目标是保持对 HTTP 1.1 的向后兼容性。

SPDY 是一个 HTTP 兼容协议，由 Google 发起，并在 Chrome、Opera、Firefox 和 Amazon Silk browsers 等浏览器中提供支持。

HTTP 实现最大的瓶颈是依赖于多连接的并发，而 HTTP 流水线可实现部分的多路复用。
SPDY 为多路复用增加了帧层，通过单一连接实现并发流。

SPDY 对当前的 HTTP 版本做的改进包括：

Multiplexed requests
Prioritized requests
Compressed headers
Server pushed streams (server push)
SPDY 试图保留现有 HTTP 的语义，因此包括 Cookies、ETag 等特性还可继续使用。